<%- include('header'); %>
<div id="index" class="container">
  <br>
  <h2>USUÁRIOS CADASTRADOS</h2>
  <hr>
<table id="minhaTabela" class="table table-bordered table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nome</th>
        <th scope="col">E-mail</th>
        <th scope="col">Permissão</th>
        <th scope="col">Criação</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>

    <% for(var i=0; i<Object.keys(usuarios).length; i++) { %>
      <tr>
        <th value="" scope="row"><%= usuarios[i].id %></th>
        <td><%= usuarios[i].nome %></td>
        <td><%= usuarios[i].email %></td>
        <td><%= usuarios[i].permissao %></td>
        <td class="moment" ><%= usuarios[i].createdAt %></td>
          <td>
            <a href="/usuario/alterar-senha/<%=usuarios[i].id %>">
              Alterar senha
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
              </svg>
            </a> |
            <button value="<%=usuarios[i].id %>" onclick="excluirUsuario(this.value)" type="submit" class="a-delete">
              Excluir usuário
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
              </svg>
            </button>
          </td>
      </tr>
    <% } %>
    </tbody>
  </table>
  <a href="/usuario/incluir"><button type="submit" class="btn btn-success">
    Cadastrar usuario
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-badge" viewBox="0 0 16 16">
      <path d="M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
      <path d="M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z"/>
    </svg>
  </button></a>
</div>

<div class="modal fade" id="modal-excluir-usuario" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 style="font-weight: bold;" class="modal-title" id="exampleModalLabel">Aviso</h5>
        <button type="button" class="cancelar-excluir-usuario btn-close" data-dismiss="modal" aria-label="Close">
        </button>
      </div>
      <div class="modal-body">
        Deseja mesmo excluir esse usuário ? Este processo é <strong>irreversível</strong>
      </div>
      <div style="text-align: left;" class="modal-footer">
        <form id="excluir-usuario" method="POST" enctype="application/x-www-form-urlencoded">
          <button type="submit" class="btn btn-danger" data-dismiss="modal">Confirmar exclusão</button>
        </form>
        <button type="button" class="cancelar-excluir-usuario btn btn-secondary" data-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>
<%- include('footer'); %>